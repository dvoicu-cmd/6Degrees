##### PUT REQUESTS #####

### addActor Tests ###
addActorCorrectPass
    ${headers}=    Create Dictionary    Content-Type=application/json
    ${params}=   Create Dictionary    name=bob    actorId=nm7001850
    ${resp}=    PUT On Session    localhost    /api/v1/addActor    json=${params}    headers=${headers}    expected_status=200

addActorFail
    ${headers}=    Create Dictionary    Content-Type=application/json
    ${params}=   Create Dictionary    name=Alice    movieId=nm1111111111111111111111111111111
    ${resp}=    PUT On Session    localhost    /api/v1/addActor    json=${params}    headers=${headers}    expected_status=400

### addMovie Tests ###

addMoviePass
    ${headers}=    Create Dictionary    Content-Type=application/json
    ${params}=   Create Dictionary    name=Wall-E    movieId=nm10385
    ${resp}=    PUT On Session    localhost    /api/v1/addMovie    json=${params}    headers=${headers}    expected_status=200

addMovieFail
    ${headers}=    Create Dictionary    Content-Type=application/json
    ${params}=   Create Dictionary    name=DriverLiterallyMe    actorId=nm111111111113333333333333333333333333333333
    ${resp}=    PUT On Session    localhost    /api/v1/addMovie    json=${params}    headers=${headers}    expected_status=400

addMovieFail2
    ${headers}=    Create Dictionary    Content-Type=application/json
    ${params1}=   Create Dictionary    name=Oppenheimer    movieId=nm48123
    ${params2}=   Create Dictionary    name=Barbie    movieId=nm48123
    ${resp}=    PUT On Session    localhost    /api/v1/addMovie    json=${params1}    headers=${headers}    expected_status=200
    ${resp}=    PUT On Session    localhost    /api/v1/addMovie    json=${params2}    headers=${headers}    expected_status=400

### addRelationship Tests ###

addRelationshipPass
    ${headers}=    Create Dictionary    Content-Type=application/json
    ${params}=   Create Dictionary    actorId=nm7001850    movieId=nm10385    #Bob acted in Wall-E
    ${resp}=    PUT On Session    localhost    /api/v1/addRelationship    json=${params}    headers=${headers}    expected_status=200

addRelationshipFail
    ${headers}=    Create Dictionary    Content-Type=application/json
    ${params}=   Create Dictionary    actorId=nm7001850    movieId=nm10385    #Bob acted in Wall-E
    ${resp}=    PUT On Session    localhost    /api/v1/addRelationship    json=${params}    headers=${headers}    expected_status=400

addRelationshipFail2
    ${headers}=    Create Dictionary    Content-Type=application/json
    ${params1}=   Create Dictionary    actorId=nm7001850    movieId=nm48123    #Bob acted in Wall-E
    ${resp}=    PUT On Session    localhost    /api/v1/addRelationship    json=${params1}    headers=${headers}    expected_status=200
    ${params2}=   Create Dictionary    movieId=nm48123    actorId=nm7001850    #Bob acted in Wall-E
    ${resp}=    PUT On Session    localhost    /api/v1/addRelationship    json=${params2}    headers=${headers}    expected_status=400

##### GET REQUESTS #####

### getActor Tests ###

getActorPass
    #Add the movie/actor
    ${headers}=    Create Dictionary    Content-Type=application/json
    ${params1}=    Create Dictionary    name=Bill    actorId=nm1111891
    ${paramsExpected}=    Evaluate    {"name": "Bill", "actorId": "nm1111891", "movies": []}
    ${resp1}=    PUT On Session    localhost    /api/v1/addActor    json=${params1}    headers=${headers}    expected_status=200

    #Execute GET
    ${url}=    Set Variable    /api/v1/getActor?actorId=nm1111891
    ${resp2}=    GET On Session    localhost    url=${url}    headers=${headers}    expected_status=200

    #Evaluate if result is correct
    ${resp2_dict}=    Evaluate    json.loads('''${resp2.text}''')
    Should Be Equal    ${paramsExpected}    ${resp2_dict}

getActorFail    #Actor does not exist
    ${headers}=    Create Dictionary    Content-Type=application/json
    ${url}=    Set Variable    /api/v1/getActor?actorId=naa3344555m11118123gb91
    ${resp2}=    GET On Session    localhost    url=${url}    headers=${headers}    expected_status=404

getActorFail2  #Inproper format
    ${headers}=    Create Dictionary    Content-Type=application/json
    ${url}=    Set Variable    /api/v1/getActor?movieId=nAm111111111111111111111111891
    ${resp2}=    GET On Session    localhost    url=${url}    headers=${headers}    expected_status=400

### getMovie Tests ###

getMoviePass
    #Add the movie/actor
    ${headers}=    Create Dictionary    Content-Type=application/json
    ${params1}=    Create Dictionary    name=Spider-Man    movieId=nm01345
    ${paramsExpected}=    Evaluate    {"name": "Spider-Man", "movieId": "nm01345", "actors": []}
    ${resp1}=    PUT On Session    localhost    /api/v1/addMovie    json=${params1}    headers=${headers}    expected_status=200

    #Execute GET
    ${url}=    Set Variable    /api/v1/getMovie?movieId=nm01345
    ${resp2}=    GET On Session    localhost    url=${url}    headers=${headers}    expected_status=200

    #Evaluate if result is correct
    ${resp2_dict}=    Evaluate    json.loads('''${resp2.text}''')
    Should Be Equal    ${paramsExpected}    ${resp2_dict}

getMovieFail    #Movie does not exist
    ${headers}=    Create Dictionary    Content-Type=application/json
    ${url}=    Set Variable    /api/v1/getMovie?movieId=nnnnnnnmmmmmmmmmm1111111111111111111
    ${resp2}=    GET On Session    localhost    url=${url}    headers=${headers}    expected_status=404
